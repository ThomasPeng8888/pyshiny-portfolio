[{"name": "app.py", "content": "import pandas as pd\nimport plotly.express as px\nimport palmerpenguins\nfrom shiny.express import input, render, ui\n\n# -----------------\n# 1. \u6578\u64da\u8207\u8a2d\u5b9a\n# -----------------\n# \u8f09\u5165\u4f01\u9d5d\u6578\u64da\u4e26\u6e05\u7406\u7f3a\u5931\u503c\ndata = palmerpenguins.load_penguins()\ndata = data.dropna()\nCOLUMNS = [\"bill_length_mm\", \"bill_depth_mm\", \"flipper_length_mm\", \"body_mass_g\"]\n\n# \u8a2d\u5b9a\u9801\u9762\u6a19\u984c\nui.page_opts(title=\"\u6975\u7c21 Plotly \u4f01\u9d5d\u5100\u8868\u677f\", fillable=True)\n\n# -----------------\n# 2. \u61c9\u7528\u7a0b\u5f0f\u4ecb\u9762 (UI)\n# -----------------\n\n# \u5074\u908a\u6b04\uff1a\u53ea\u653e\u4e00\u500b\u8f38\u5165\u5143\u4ef6\nwith ui.sidebar(title=\"\u9078\u64c7\u8b8a\u6578\"):\n    ui.input_select(\n        \"selected_var\",\n        \"\u8981\u5206\u6790\u7684\u8b8a\u6578:\",\n        choices=COLUMNS,\n        selected=\"body_mass_g\",\n    )\n    ui.hr()\n    ui.div(\"\u6b64\u5716\u8868\u5c55\u793a\u4e86\u6240\u9078\u8b8a\u6578\u7684\u5206\u4f48\u60c5\u6cc1\u3002\", style=\"padding: 10px; opacity: 0.7;\")\n\n# \u4e3b\u756b\u9762\uff1a\u986f\u793a Plotly \u5716\u8868\nui.h3(\"\u4e92\u52d5\u5f0f\u6578\u64da\u5206\u4f48\u5716\")\n\n# \u4f7f\u7528 @render.express \u88dd\u98fe\u5668\u4f86\u6e32\u67d3 Plotly \u5716\u8868\n@render.express\ndef histogram():\n    # \u8b80\u53d6\u4f7f\u7528\u8005\u8f38\u5165\u7684\u503c (\u97ff\u61c9\u5f0f)\n    var = input.selected_var()\n    \n    # \u4f7f\u7528 Plotly Express \u5275\u5efa\u76f4\u65b9\u5716\n    fig = px.histogram(\n        data, \n        x=var, \n        color=\"species\",\n        title=f\"\u76f4\u65b9\u5716: {var} (\u6309\u7269\u7a2e\u5283\u5206)\",\n        opacity=0.8\n    )\n    \n    # \u5c07 Plotly \u5716\u8868\u7269\u4ef6 'fig' \u50b3\u905e\u7d66 Shiny \u986f\u793a\n    fig", "type": "text"}]